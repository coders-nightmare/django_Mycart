{% extends 'shop/base.html' %} {% load static %}
<!-- added title -->
{% block title %} Home shop {% endblock %}
<!-- end title -->
<!-- added body -->
{% block body %}
<!-- carousel -->
<section id="reviews" class="py-3">
  {% for product , range ,nSlide in allProds%}
  <div class="container">
    <h1 >{{product.0.category}}</h1>
  </div>
  <div id="slider{{forloop.counter}}" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <!-- carousel item -->
      <div class="carousel-item active">
        <div class="container">
          <div class="row">
            {% for i in product %}
            <div class="col-sm-4 mx-auto d-flex justify-content-between review-item py-3">
                <div class="card">
                  <img class="card-img-top" src="/media/{{i.image}}" alt="Card image cap"/>
                    <div class="card-body">
                      <h5 class="card-title">{{i.product_name}}</h5>
                        <p class="card-text">
                          {{i.desc}}
                        </p>
                      <button id="pr{{i.id}}" class="btn btn-primary cart">Buy</button>
                    </div>
                  </div>
              </div>
              {% if forloop.counter|divisibleby:3 and forloop.counter > 0 and not forloop.last %}
                    </div>
                  </div>
                </div>
                <!-- carousel item -->
                <div class="carousel-item">
                  <div class="container">
                    <div class="row">
                      {% endif %} 
            {% endfor %}
          </div>
        </div>
      </div>
      <!-- end of carousel item -->
    </div>
    <!-- carousel control -->
    <a
    href="#slider{{forloop.counter}}"
    class="carousel-control-prev"
    role="button"
    data-slide="prev"
    >
    <span class="carousel-control-prev-icon bg-primary"></span>
  </a>
  <a
  href="#slider{{forloop.counter}}"
  class="carousel-control-next"
      role="button"
      data-slide="next"
    >
    <span class="carousel-control-next-icon bg-primary"></span>
    </a>
  </div>
  {% endfor %}
</section>
<!-- end of carousel -->
{% endblock %}
<!-- end body -->
<!-- js -->
{% block js %} 
    <script>
      if(localStorage.getItem('cart')==null){
        var cart ={};
      }
      else{
        cart=JSON.parse(localStorage.getItem('cart'));
        document.getElementById('cart').innerHTML=Object.keys(cart).length;
      }
      $('.cart').click(function(){
        idstr=this.id.toString();
        if(cart[idstr] != undefined){
          cart[idstr]+=1;
        }
        else{
          cart[idstr]=1;
        }
        localStorage.setItem('cart',JSON.stringify(cart))
        document.getElementById('cart').innerHTML=Object.keys(cart).length;
      });
    </script>
{% endblock %}
<!-- end  -->